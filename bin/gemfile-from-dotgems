#!/usr/bin/env ruby
# encoding: UTF-8
require File.join(File.expand_path(File.dirname(__FILE__)), "../lib/gemfile_from_dot_gems")

unless (ARGV & %w[ -h --help -? --usage ]).empty?
  puts DATA.read.gsub(/\$0/, File.basename($0))
  exit 0
end

begin
  puts GemfileFromDotGems[ARGF.read, ARGF.filename]
rescue GemfileFromDotGems::ParseError => e
  $stderr.puts e
  exit 1
end

__END__
Convert Heroku gem manifest format (.gems) to Bundler format (Gemfile)

  Usage:
    $0 dot-gems-file [, dot-gems-file ...]
    $0 < .gems
    $0 < .gems > Gemfile
